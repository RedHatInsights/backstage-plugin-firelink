"use strict";(self.webpackChunkinternal_backstage_plugin_firelink=self.webpackChunkinternal_backstage_plugin_firelink||[]).push([[892],{5957:(e,s,t)=>{t.r(s),t.d(s,{ExampleComponent:()=>g});var r=t(1085),n=t(5478),a=t(2501),l=t(9040),i=t(4321),c=t(4947),h=t(2326),o=t(7403),p=t(6454),x=t(9490),d=t(1009),u=t(3677),j=t(4801),m=t(985),f=t(7625),A=t(9719),y=t(9203),k=t(7707),b=t(8951);const g=()=>{const e=`${(0,x.useApi)(x.configApiRef).getString("backend.baseUrl")}/api/proxy/ephemeral`,[s,t]=(0,n.useState)([]),[g,v]=(0,n.useState)([]),[E,w]=(0,n.useState)(!0),[_,S]=(0,n.useState)(!0),[$,R]=(0,n.useState)(null),T=({text:e,max:s})=>{if(e.length<=s)return(0,r.jsx)(a.A,{children:e});const t=e.slice(0,s)+"...";return(0,r.jsx)(l.Ay,{title:e,children:(0,r.jsx)(a.A,{style:{cursor:"pointer"},children:t})})};function C(){w(!0),fetch(`${e}/api/v1/namespaces`).then((e=>{if(!e.ok)throw w(!1),new Error(`Error fetching namespaces: ${e.statusText}`);return e.json()})).then((e=>{const s=e.items.filter((e=>e.metadata.name.startsWith("ephemeral-")&&!e.metadata.name.includes("system")));t(s),w(!1)})).catch((e=>{R(new Error(`Error fetching namespaces: ${response.statusText}`)),console.error("Error:",e)}))}function N(){S(!0),fetch(`${e}/apis/cloud.redhat.com/v1alpha1/namespacereservations`).then((e=>{if(!e.ok)throw new Error(`Error fetching NamespaceReservations: ${e.statusText}`);return e.json()})).then((e=>{v(e),S(!1)})).catch((e=>{console.error("Error:",e),R(new Error(`Error fetching NamespaceReservations: ${response.statusText}`))}))}if((0,n.useEffect)((()=>{C(),N()}),[]),$)return(0,r.jsxs)(a.A,{variant:"body1",children:["Error: ",$.message]});const q=({namespace:e})=>{if("Terminating"===e.status.phase)return null;const s=(e=>g.items.find((s=>s.status.namespace===e.metadata.name)))(e),t=!!s;return(0,r.jsxs)(A.A,{children:[(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsx)(y.A,{href:`https://firelink.apps.crc-eph.r9lp.p1.openshiftapps.com/namespace/describe/${e.metadata.name}`,target:"_blank",children:(0,r.jsxs)(a.A,{children:[" ",e.metadata.name]})})}),(0,r.jsx)(j.A,{style:{flex:1},children:t?(0,r.jsx)(k.A,{style:{color:"#00FF11"}}):""}),(0,r.jsxs)(j.A,{style:{flex:1},children:[(0,r.jsxs)(a.A,{children:[" ",e.status.phase]})," "]}),(0,r.jsx)(j.A,{style:{flex:1},children:t?(0,r.jsx)(T,{text:s.spec.requester,max:20}):""}),(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsxs)(a.A,{children:[" ",e.metadata.labels.pool]})}),(0,r.jsx)(j.A,{style:{flex:1},children:t?(n=s.status.expiration,new Date(n).toLocaleString()):""})]});var n},D=()=>(0,r.jsx)(m.A,{component:i.A,children:(0,r.jsxs)(d.A,{children:[(0,r.jsx)(f.A,{children:(0,r.jsxs)(A.A,{children:[(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsx)(a.A,{variant:"button",children:"Namespace"})}),(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsx)(a.A,{variant:"button",children:"Reserved"})}),(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsx)(a.A,{variant:"button",children:"Status"})}),(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsx)(a.A,{variant:"button",children:"Requester"})}),(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsx)(a.A,{variant:"button",children:"Pool Type"})}),(0,r.jsx)(j.A,{style:{flex:1},children:(0,r.jsx)(a.A,{variant:"button",children:"Expiration"})})]})}),(0,r.jsx)(u.A,{children:s.map((e=>(0,r.jsx)(q,{namespace:e},e.metadata.name)))})]})});return(0,r.jsxs)(h.Y,{themeId:"tool",children:[(0,r.jsxs)(o.Y,{title:"Ephemeral Namespaces",children:[E||_?null:(0,r.jsx)(c.A,{onClick:()=>{S(!0),w(!0),R(null),C(),N()},children:"Refresh"}),(0,r.jsx)(c.A,{onClick:()=>{window.open("https://firelink.apps.crc-eph.r9lp.p1.openshiftapps.com/namespace/reserve","_blank")},children:"Reserve"}),(0,r.jsx)(c.A,{href:"https://firelink.apps.crc-eph.r9lp.p1.openshiftapps.com/apps/deploy",target:"_blank",children:"Deploy"})]}),(0,r.jsx)(p.U,{children:E||_?(0,r.jsx)(b.A,{}):(0,r.jsx)(D,{})})]})}}}]);
//# sourceMappingURL=892.ac37c823.chunk.js.map